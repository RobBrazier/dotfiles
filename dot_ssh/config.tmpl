# Git Hosts
{{ range $host := .gitHosts -}}
{{ $hostname := .name -}}
{{ if not (eq (get . "hostname") "") -}}
  {{ $hostname = .hostname -}}
{{ end -}}
Host {{ .name }}
  User git
  {{ if not (eq (get . "port") "") -}}
  Port {{ .port }}
  {{ end -}}
  Hostname {{ $hostname }}
  {{ if not (eq (get . "identity") "") -}}
  IdentityFile ~/.ssh/{{ .identity }}_ed25519.pub
  IdentitiesOnly yes
  {{ end }}
{{ end }}

# SSH Hosts
{{- $suffix := .ssh.aliasSuffix }}
{{- range .ssh.aliases }}
{{ if not (eq (get . "name") "") -}}}
Host {{ .name }}
{{ else -}}
Host {{ .host }}
{{- end }}
  User {{ .user }}
  {{ if eq (get . "external") "true" -}}
  Hostname {{ .host }}
  {{ else -}}
  Hostname {{ .host }}.{{ $suffix }}
  {{ end -}}
  {{ if not (eq (get . "port") "") -}}
  Port {{ .port }}
  {{ end -}}
{{ end }}
